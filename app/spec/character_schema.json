{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "FERIXDI Character",
  "type": "object",
  "required": ["id", "name_ru", "group", "appearance_ru", "speech_style_ru", "behavior_ru", "speech_pace", "swear_level", "role_default", "signature_words_ru", "prompt_tokens", "modifiers"],
  "properties": {
    "id": { "type": "string", "pattern": "^[a-z0-9_]+$" },
    "name_ru": { "type": "string" },
    "group": { "type": "string" },
    "tags": { "type": "array", "items": { "type": "string" } },
    "appearance_ru": { "type": "string", "minLength": 20 },
    "speech_style_ru": { "type": "string", "minLength": 10 },
    "behavior_ru": { "type": "string", "minLength": 10 },
    "speech_pace": { "type": "string", "enum": ["slow", "normal", "fast"] },
    "swear_level": { "type": "integer", "minimum": 0, "maximum": 3 },
    "role_default": { "type": "string", "enum": ["A", "B", "any"] },
    "signature_words_ru": { "type": "array", "items": { "type": "string" }, "minItems": 1 },
    "prompt_tokens": {
      "type": "object",
      "required": ["character_en"],
      "properties": {
        "character_en": { "type": "string", "minLength": 20 }
      }
    },
    "modifiers": {
      "type": "object",
      "required": ["hook_style", "laugh_style"],
      "properties": {
        "hook_style": { "type": "string" },
        "laugh_style": { "type": "string" }
      }
    },
    "compatibility": {
      "type": "string",
      "enum": ["meme", "conflict", "calm", "chaotic", "balanced"]
    },
    "identity_anchors": {
      "type": "object",
      "description": "Якоря стабильности для Veo — предотвращают перерисовку между генерациями. ВСЕ поля ОБЯЗАТЕЛЬНЫ для повторяемости.",
      "required": ["face_silhouette", "signature_element", "micro_gesture", "wardrobe_anchor"],
      "properties": {
        "face_silhouette": { "type": "string", "minLength": 20, "description": "Отличимый силуэт лица (подбородок/скулы/нос/брови) — EN, 20+ символов" },
        "signature_element": { "type": "string", "minLength": 10, "description": "1-2 заметных элемента (серьги/платок/кепка/очки/тату)" },
        "micro_gesture": { "type": "string", "minLength": 15, "description": "Повторяемый микрожест при речи (lip bite / усмешка / бровь)" },
        "wardrobe_anchor": { "type": "string", "minLength": 30, "description": "Полное описание одежды: материал + цвет + состояние + аксессуары" }
      }
    },
    "vibe_archetype": {
      "type": "string",
      "description": "Архетип вайба: переопределяет дефолтный из golden_standard"
    },
    "world_aesthetic": {
      "type": "string",
      "description": "Эстетика мира персонажа (VIP-деревня / городской гранж / офис)"
    },
    "speech_identity": {
      "type": "object",
      "description": "Речевая идентичность — 9 параметров для ТОЧНОЙ повторяемости стиля речи. Gemini ОБЯЗАН писать реплики в этом стиле.",
      "properties": {
        "vocabulary_level": { "type": "string", "description": "Уровень лексики: простой бытовой / с профессиональными вставками / богатый литературный" },
        "sentence_structure": { "type": "string", "description": "Структура предложений: короткие рубленые / длинные тягучие / смешанные с перескоками" },
        "filler_words": { "type": "array", "items": { "type": "string" }, "description": "Слова-паразиты: это ж, ну, типа, значит, вот" },
        "reaction_sounds": { "type": "array", "items": { "type": "string" }, "description": "Реакционные звуки: ой, ах, тьфу, хм, ну-ну, батюшки" },
        "emphasis_pattern": { "type": "string", "description": "Как акцентирует: повтор слова / пауза перед ударным / нарастающая громкость" },
        "question_style": { "type": "string", "description": "Стиль вопросов: риторические обвинительные / утвердительные с подтекстом / саркастические" },
        "interruption_style": { "type": "string", "description": "Стиль перебивания: врывается не дослушав / ждёт и бьёт одной фразой / никогда не перебивает" },
        "dialect_markers": { "type": "string", "description": "Диалектные маркеры: деревенские сокращения / старорусские обороты / молодёжный сленг / нет" },
        "emotional_escalation": { "type": "string", "description": "Скорость эскалации: мгновенная 0-100 / медленная копит и бьёт / ледяная понижает голос" }
      }
    },
    "biology_override": {
      "type": "object",
      "description": "Биологические параметры для ТОЧНОЙ повторяемости в Veo. ВСЕ поля ОБЯЗАТЕЛЬНЫ.",
      "required": ["age", "skin_tokens", "eye_tokens"],
      "properties": {
        "age": { "type": "string", "description": "Точный возраст персонажа" },
        "skin_tokens": { "type": "array", "items": { "type": "string" }, "minItems": 2, "description": "2+ токена кожи EN: текстура, цвет, дефекты (wrinkles, age spots, ruddy)" },
        "eye_tokens": { "type": "array", "items": { "type": "string" }, "minItems": 1, "description": "1+ токен глаз EN: цвет + характер (piercing pale blue, tired brown)" },
        "hair_tokens": { "type": "array", "items": { "type": "string" }, "description": "Токены волос EN: цвет, текстура, стиль (wispy grey with lilac tint)" },
        "nose_tokens": { "type": "array", "items": { "type": "string" }, "description": "Токены носа EN: форма, дефекты (bulbous red-veined, crooked from break)" },
        "mouth_tokens": { "type": "array", "items": { "type": "string" }, "description": "Токены рта EN: губы, зубы, особенности (thin lips, gold crown left)" },
        "hands_tokens": { "type": "array", "items": { "type": "string" }, "description": "Токены рук EN: текстура, мозоли, кольца (gnarled roots, sawdust under nails)" },
        "posture_tokens": { "type": "array", "items": { "type": "string" }, "description": "Токены осанки EN: (straight military bearing, hunched from gaming)" },
        "height_build": { "type": "string", "description": "Рост и телосложение EN: (tall wiry, short stocky, petite curvy)" }
      }
    }
  }
}
